<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Blog - BytesByBlinken</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="./images/Logo.png">
</head>
<body>
    <header>
        <nav id="navbar">
            <ul>
                <li><a id="home" href="./index.html">Home</a></li>
                <li><a id="profile-link" href="https://github.com/ItsHeyBlinken" target="_blank">GitHub</a></li>
                <li><a id="profile-link" href="https://www.linkedin.com/in/christopher-hall-65907b291/" target="_blank">LinkedIn</a></li>
                <li><a id="profile-link" href="./blog.html">Blog</a></li>
                
                <!-- Admin Login Form (Hidden when logged in) -->
                <li id="admin-login-nav" class="admin-login-nav">
                    <form id="admin-login-form" class="admin-login-form">
                        <input type="text" id="username" name="username" placeholder="Username" required>
                        <input type="password" id="password" name="password" placeholder="Password" required>
                        <button type="submit" class="admin-login-btn">Login</button>
                    </form>
                </li>
                
                <!-- Admin Panel (Hidden when not logged in) -->
                <li id="admin-panel-nav" class="admin-panel-nav" style="display: none;">
                    <button id="new-post-btn" class="admin-btn">+ New Post</button>
                    <button id="edit-mode-btn" class="admin-btn">Edit Mode</button>
                    <button id="logout-btn" class="admin-btn">Logout</button>
                </li>
                
                <li class="theme-toggle-container">
                    <button id="theme-toggle" class="theme-toggle-btn" aria-label="Toggle dark/light mode">
                        <span class="theme-icon">🌙</span>
                    </button>
                </li>
            </ul>
        </nav>
    </header>
    
    <main>
        <section id="blog" class="blog">
            <div class="blog-header">
                <h1>My Blog</h1>
                <p>Thoughts, updates, and insights from my development journey</p>
            </div>
            
            <!-- Archive Navigation -->
            <div class="archive-navigation">
                <h3>Browse by Month</h3>
                <div class="archive-years">
                    <div class="year-section">
                        <h4>2025</h4>
                        <div class="month-links">
                            <button class="month-btn" data-month="2025-07">July</button>
                            <button class="month-btn" data-month="2025-06">June</button>
                            <button class="month-btn" data-month="2025-05">May</button>
                            <button class="month-btn" data-month="2025-04">April</button>
                            <button class="month-btn" data-month="2025-03">March</button>
                            <button class="month-btn" data-month="2025-02">February</button>
                            <button class="month-btn" data-month="2025-01">January</button>
                        </div>
                    </div>
                    <div class="year-section">
                        <h4>2024</h4>
                        <div class="month-links">
                            <button class="month-btn" data-month="2024-12">December</button>
                        </div>
                    </div>
                </div>
                <button id="show-all-posts" class="show-all-btn">Show All Posts</button>
            </div>
            
            <!-- New Post Form (Hidden by default) -->
            <div id="new-post-form" class="new-post-form" style="display: none;">
                <h2>Create New Blog Post</h2>
                <form id="blog-form">
                    <div class="form-group">
                        <label for="post-title">Title:</label>
                        <input type="text" id="post-title" name="title" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="post-content">Content:</label>
                        <textarea id="post-content" name="content" rows="15" required placeholder="Write your blog post content here..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="post-tags">Tags (comma-separated):</label>
                        <input type="text" id="post-tags" name="tags" placeholder="web development, portfolio, updates">
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="submit-btn">Publish Post</button>
                        <button type="button" id="cancel-post" class="cancel-btn">Cancel</button>
                    </div>
                </form>
            </div>
            
            <!-- Blog Posts Container -->
            <div id="blog-posts-container">
                <!-- Blog posts will be loaded here dynamically -->
            </div>
        </section>
    </main>
    
    <footer>
        <div>
            <p><strong>Copyright &copy; 2025 - <strong>BytesByBlinken</strong></p>
        </div>
        <div>
            <img id="footer-logo" src="./images/Logo.png" alt="Logo">
        </div>
        <div>
            <p>Contact Me @ BytesByBlinken@gmail.com</p>
        </div>
    </footer>
    
    <script>
        // Configuration
        const API_BASE_URL = 'http://168.231.66.214:3000/api';
        
        // Theme Management System
        function initThemeSystem() {
            const themeToggle = document.getElementById('theme-toggle');
            const themeIcon = document.querySelector('.theme-icon');
            
            // Check for saved theme preference or default to dark
            const savedTheme = localStorage.getItem('portfolio-theme') || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);
            updateThemeIcon(savedTheme);
            
            // Theme toggle functionality
            themeToggle.addEventListener('click', () => {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                
                // Apply new theme
                document.documentElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('portfolio-theme', newTheme);
                updateThemeIcon(newTheme);
            });
        }
        
        function updateThemeIcon(theme) {
            const themeIcon = document.querySelector('.theme-icon');
            if (theme === 'light') {
                themeIcon.textContent = '☀️';
            } else {
                themeIcon.textContent = '🌙';
            }
        }
        
        // Blog Management System
        function initBlogSystem() {
            const loginForm = document.getElementById('admin-login-form');
            const newPostBtn = document.getElementById('new-post-btn');
            const editModeBtn = document.getElementById('edit-mode-btn');
            const logoutBtn = document.getElementById('logout-btn');
            const newPostForm = document.getElementById('new-post-form');
            const blogForm = document.getElementById('blog-form');
            const cancelPostBtn = document.getElementById('cancel-post');
            
            // Archive navigation
            const monthButtons = document.querySelectorAll('.month-btn');
            const showAllBtn = document.getElementById('show-all-posts');
            
            // Load blog posts on page load
            loadBlogPosts();
            
            // Login form submission
            loginForm.addEventListener('submit', handleLogin);
            
            // Admin panel buttons
            newPostBtn.addEventListener('click', () => {
                newPostForm.style.display = 'block';
                newPostBtn.style.display = 'none';
            });
            
            cancelPostBtn.addEventListener('click', () => {
                newPostForm.style.display = 'none';
                newPostBtn.style.display = 'block';
                blogForm.reset();
            });
            
            logoutBtn.addEventListener('click', handleLogout);
            
            // Blog form submission
            blogForm.addEventListener('submit', handleNewPost);
            
            // Archive navigation
            monthButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const month = btn.getAttribute('data-month');
                    filterPostsByMonth(month);
                    
                    // Update active state
                    monthButtons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                });
            });
            
            showAllBtn.addEventListener('click', () => {
                loadBlogPosts();
                monthButtons.forEach(b => b.classList.remove('active'));
            });
            
            // Check if user is already logged in
            checkAuthStatus();
        }
        
        // Authentication functions
        async function handleLogin(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            try {
                const response = await fetch(`${API_BASE_URL}/auth/login`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ username, password })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    // Store token
                    localStorage.setItem('blog-admin-token', data.token);
                    localStorage.setItem('blog-admin-user', JSON.stringify(data.user));
                    
                    // Show admin panel
                    showAdminPanel();
                    
                    // Reload posts
                    loadBlogPosts();
                } else {
                    alert('Login failed: ' + data.error);
                }
            } catch (error) {
                console.error('Login error:', error);
                alert('Login failed. Please try again.');
            }
        }
        
        function handleLogout() {
            localStorage.removeItem('blog-admin-token');
            localStorage.removeItem('blog-admin-user');
            hideAdminPanel();
            loadBlogPosts(); // Reload without admin features
        }
        
        function checkAuthStatus() {
            const token = localStorage.getItem('blog-admin-token');
            if (token) {
                showAdminPanel();
            }
        }
        
        function showAdminPanel() {
            document.getElementById('admin-panel-nav').style.display = 'flex';
            document.getElementById('admin-login-nav').style.display = 'none';
        }
        
        function hideAdminPanel() {
            document.getElementById('admin-panel-nav').style.display = 'none';
            document.getElementById('admin-login-nav').style.display = 'block';
        }
        
        // Blog post functions
        async function loadBlogPosts() {
            try {
                const response = await fetch(`${API_BASE_URL}/posts`);
                const posts = await response.json();
                
                displayBlogPosts(posts);
            } catch (error) {
                console.error('Error loading posts:', error);
                // Fallback to static posts if API is unavailable
                displayStaticPosts();
            }
        }
        
        function filterPostsByMonth(month) {
            // This would filter posts by month when the API is working
            // For now, we'll show all posts and highlight the selected month
            loadBlogPosts();
        }
        
        async function handleNewPost(e) {
            e.preventDefault();
            
            const formData = new FormData(blogForm);
            const postData = {
                title: formData.get('title'),
                content: formData.get('content'),
                tags: formData.get('tags').split(',').map(tag => tag.trim()).filter(tag => tag),
                author: 'Chris (BytesByBlinken)',
                published_date: new Date().toISOString().split('T')[0]
            };
            
            try {
                const token = localStorage.getItem('blog-admin-token');
                const response = await fetch(`${API_BASE_URL}/posts`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify(postData)
                });
                
                if (response.ok) {
                    alert('Post created successfully!');
                    newPostForm.style.display = 'none';
                    document.getElementById('new-post-btn').style.display = 'block';
                    blogForm.reset();
                    loadBlogPosts(); // Reload posts
                } else {
                    const error = await response.json();
                    alert('Failed to create post: ' + error.error);
                }
            } catch (error) {
                console.error('Error creating post:', error);
                alert('Failed to create post. Please try again.');
            }
        }
        
        function displayBlogPosts(posts) {
            const container = document.getElementById('blog-posts-container');
            container.innerHTML = '';
            
            if (posts.length === 0) {
                container.innerHTML = '<div class="no-posts"><h3>No blog posts found</h3><p>Check back soon for new content!</p></div>';
                return;
            }
            
            posts.forEach(post => {
                const postElement = createBlogPostElement(post);
                container.appendChild(postElement);
            });
        }
        
        function displayStaticPosts() {
            // Fallback to static posts if API is unavailable
            const staticPosts = [
                {
                    id: 1,
                    title: "July Update: Crunch Time Before Launch",
                    content: `We're officially less than a month away from the soft launch of Online Card Show — and I'm feeling a mix of excitement and nerves as the big day approaches.

The last few weeks have been all about getting everything production-ready. Moving from a dev environment to a live app is no joke. I've been fine-tuning the database, setting up secure deployments, double-checking API endpoints, and working through all the behind-the-scenes details that most users will never see — but are critical to a smooth launch. If all goes to plan, we're aiming to go live on August 1st!

At the same time, I'm starting a new chapter at my day job. I just got promoted into a new role that comes with fresh challenges and responsibilities. While it's not a dev position, I'm excited about the growth it'll bring — and I've made sure I'll still have time carved out to work on Online Card Show in the evenings and weekends.

Right now, it's crunch time. The final stretch. I'm focused on squashing the last of the bugs and making sure the experience is smooth for our early users. The soft launch is just the beginning, but it's a huge milestone and one I've been working toward for a long time.

**Closing Thoughts**

It's been a long road getting to this point, but the finish line is in sight. I'm proud of how far this project has come and grateful for everyone who's followed the journey — here's to a strong launch and an even stronger future!

**What's Next?**

After launch, I'll be focused on gathering user feedback, rolling out new features, growing our social presence, and dialing in a solid customer acquisition strategy.

Thanks for following along — next month is going to be a big one!`,
                    author: "Chris (BytesByBlinken)",
                    date: "July 7, 2025",
                    tags: ["launch", "updates", "development", "online-card-show"]
                },
                {
                    id: 2,
                    title: "May 2025 Blog: Project Progress and Updates",
                    content: `May was a busy month for Online Card Show and for me personally as a developer. Here's everything that moved forward:

**Beta Launch and Early Feedback**

I officially opened the beta program and welcomed my first group of testers. Getting real people using the app was huge — the feedback has been super helpful for finding bugs and understanding how people actually want to use the platform. I'm making changes and improvements every day based on what testers say.

**Improving User Experience**

Based on beta feedback, I focused on polishing the user dashboards and smoothing out the subscription signup and management flows. I also added a new "Make an Offer" button, so buyers can negotiate prices directly—this should make trading way more flexible and fun.

**Backend Stability and Performance**

I spent a lot of time tuning the database (PostgreSQL) and Redis cache to improve speed and reliability. This part can feel tricky, but it's important to keep the app running fast as more people join.

**Marketing Efforts**

I've been working on growing my social media presence to help spread the word about Online Card Show. I've also been reaching out to potential beta testers through my network.

**Learning Server Management**

I started diving into VPS management and server maintenance to get ready for hosting the app live. This is all new territory for me, but I'm making progress step by step, learning how to keep the server secure and stable.

I have only had to restore the server once, but it was a good reminder of how important it is to have a backup plan. I'm also learning how to monitor the server's health and performance to ensure it's running smoothly. So, I call that a win!

**Business and Legal Progress and Other Next Steps**

I opened a bank account for the project (not a full business account yet, but a start). I'm planning to set up the LLC soon. The Privacy Policy and Terms of Service are in progress, aiming to have them ready by July.

**Closing Thoughts**

May was a big month, and I'm excited to see what June brings. I'm looking forward to continuing to build Online Card Show and to keep pushing towards my goal of launching a fully operational platform.

**What's Next?**

June's all about refining what's built so far—polishing features, improving performance, and getting closer to a smooth, stable beta experience. I'll also be diving deeper into hosting setup and making sure the business side catches up with the tech.

I'm excited to keep building and to see where this journey takes me. Thanks for being along for the ride!`,
                    author: "Chris (BytesByBlinken)",
                    date: "June 3, 2025",
                    tags: ["progress", "updates", "development", "beta-launch", "online-card-show"]
                }
            ];
            
            displayBlogPosts(staticPosts);
        }
        
        function createBlogPostElement(post) {
            const article = document.createElement('article');
            article.className = 'blog-tile';
            
            // Format content with line breaks
            const formattedContent = post.content.replace(/\n\n/g, '</p><p>').replace(/\n/g, '<br>');
            
            article.innerHTML = `
                <h2>${post.title}</h2>
                <div class="post-meta">
                    <p class="post-author">By: ${post.author}</p>
                    <p class="post-date">Published on: ${post.date}</p>
                </div>
                <div class="post-content">
                    <p>${formattedContent}</p>
                </div>
                <div class="post-tags">
                    ${post.tags ? post.tags.map(tag => `<span class="tag">${tag}</span>`).join('') : ''}
                </div>
                <div class="post-actions" style="display: ${isAdmin() ? 'flex' : 'none'}">
                    <button class="edit-post-btn" data-post-id="${post.id}">Edit</button>
                    <button class="delete-post-btn" data-post-id="${post.id}">Delete</button>
                </div>
            `;
            
            return article;
        }
        
        function isAdmin() {
            return localStorage.getItem('blog-admin-token') !== null;
        }
        
        // Initialize all systems when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            initThemeSystem();
            initBlogSystem();
        });
    </script>
</body>
</html>